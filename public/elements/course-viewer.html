<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="/bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="/bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="/bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="/bower_components/paper-styles/paper-styles.html">
<link rel="import" href="/bower_components/paper-ripple/paper-ripple.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="/behaviors/api-requestor.html">
<link rel="import" href="/behaviors/cascaded-animation.html">
<link rel="import" href="/elements/course-browser.html">
<link rel="import" href="/elements/loading-overlay.html">
<link rel="import" href="/styles/shared-styles.html">

<dom-module id="course-viewer">
	<template>
		<style>
			:host {
				display: block;
				position: relative;
			}
			app-header-layout {
				@apply(--layout-fit);
			}

			#header {
				background: var(--paper-teal-100);
				/*@apply(--shadow-elevation-2dp);*/
			}

			#description {
				@apply(--paper-font-subhead);
				@apply(--layout-horizontal);
				@apply(--layout-center);
				padding: 0 16px;
				min-height: 64px;
				padding-bottom: 5px;
			}

			#subject-narrow {
				display: none;
			}

			@media (max-width: 667px) {
				#subject-narrow {
					display: block;
				}
				#subject-wide {
					display: none;
				}
				app-toolbar {
					height: 48px;
				}
				#descripition {
					min-height: 48px;
				}
			}


		</style>

		<loading-overlay active="[[loading]]"></loading-overlay>

		<app-header-layout id="container">

		<div id="header">
			<app-toolbar></app-toolbar>
			<app-toolbar></app-toolbar>
			<app-toolbar></app-toolbar>
		</div>

		<course-browser course-id="[[courseId]]"></course-browser>

		</app-header-layout>

	</template>
	<script>
		Polymer({
			is: 'course-viewer',
			behaviors: [Behaviors.api_requestor,  Behaviors.cascaded_animation],
			properties: {
				courseId: {
					type: String,
					value: undefined,
					observer: 'get_new_data'
				},
				course: {
					type: Object, 
					value: {}
				},
				loading: {
					type: Boolean,
					value: false
				},
				videos: {
					type: Array,
					value: undefined
				}
			},

			get_new_data: function (new_course_id, old_course_id) {
				this.loading = true;
				this.make_api_request({
					verb: 'GET', 
					resource: 'videos',
					query: { where: {course_id: this.courseId} },
					context: this, 
					callback: function (result) { 
						this.videos = result.body.data; 
						console.log(this.videos);
						this.loading = false;
					}
				});
			}



		});
	</script>
</dom-module>
