
<link rel="import" href="/bower_components/paper-input/paper-textarea.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="/bower_components/paper-styles/shadow.html">
<link rel="import" href="/styles/shared-styles.html">
<dom-module id="course-editor">
	<template>
		<style>
			:host {
				display: block;
			}
			app-toolbar {
				background-color: var(--paper-teal-100);
				@apply(--shadow-elevation-2dp);
			}
			paper-tabs {
				--paper-tabs-selection-bar-color: #fff;
			}
			paper-tab {
				--paper-tab-ink: #fff;
			}
		</style>
		<app-toolbar>
			<paper-tabs selected="0">
				<paper-tab>Course Details</paper-tab>
				<paper-tab>Videos</paper-tab>
			</paper-tabs>
		</app-toolbar>
		<paper-input label="Title" value="{{course.topic.title}}"></paper-input>
		<paper-textarea label="Description" value="{{course.topic.description}}"></paper-textarea>
	</template>
	<script>
		Polymer({
			is: 'course-editor',
			
			properties: {
				token: Object,
				courseId: {
					type: String,
					value: undefined,
					observer: 'get_new_data'
				},
				course: {
					type: Object, 
					value: undefined
				},
				loading: {
					type: Boolean,
					value: false
				}
			},

			get_new_data: function (new_course_id, old_course_id) {
				this.loading = true;
				this.fire('api-request', {
					verb: 'GET',
					resource: ['courses', new_course_id],
					callback_scope: this,
					callback: function (result) { 
						var course = result.body.data;
						if (!course.id || course.person.id !== this.token.decoded.user.id) this.page_not_found();
						else this.course = course;
						console.log(this.course);
						this.loading = false;
					}
				});
			},

			page_not_found: function () {
				this.fire('navigation-request', '/');
			}

		});
	</script>
</dom-module>