<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-ripple/paper-ripple.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/styles/shared-styles.html">
<link rel="import" href="/behaviors/responsive-properties.html">
<link rel="import" href="/elements/responsive-queries.html">
<dom-module id="ripple-card">
	<template>
		<style>
			:host {
				display: block;
				position: relative;
				cursor: pointer;
				@apply(--layout-horizontal);
			}

			:host([narrow]) {
				width: 100%;
			}

			paper-card {
				width: 100%;
				box-sizing: content-box;
				padding: 15px;

				@apply(--ripple-card);
				@apply(--layout-vertical);

				--paper-card-background-color: var(--ripple-card-background-color);
				--paper-card-header-color: var(--ripple-card-header-color);
		
				--paper-card-header: {
					@apply(--ripple-card-header);
				};
				--paper-card-header-text: {
					@apply(--ripple-card-header-text);
				};
				--paper-card-header-image: {
					@apply(--ripple-card-header-image);
				};
				--paper-card-header-image-text: {
					@apply(--ripple-card-header-image-text);
				};
				--paper-card-content: {
					@apply(--ripple-card-content);
				};
				--paper-card-actions: {
					@apply(--ripple-card-actions);
				};
				--paper-card: {
					@apply(--ripple-card-inner-card);
				};

			}
			paper-ripple {
				color: var(--primary-color);
			}
			.card-content {
				position: relative;
				@apply(--layout-flex);
			}
			.text-fade {
				position: absolute;
				bottom: 0; left: 0; right: 0;
				height: 12px;
				background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1));;
			}
			:host([rippling]) .text-fade{ 
				display: none;
			}
		</style>
		<responsive-queries narrow="{{narrow}}"></responsive-queries>
		<paper-card 
			heading="[[heading]]" 
			image="[[image]]" 
			elevation="[[_get_elevation(narrow)]]" 
			animated-shadow="[[animatedShadow]]"
			preload-image="[[preloadImage]]"
			fade-image="[[fadeImage]]"
			placeholder-image="[[placeholderImage]]"
			on-tap="_hide_fade"
		>
			<paper-ripple on-transitionend="_show_fade"></paper-ripple>
			<content select=".full-card"></content>
			<div class="card-content">
				<content select=".card-body"></content>
				<div class="text-fade" hidden="[[_animating]]"></div>
			</div>
		</paper-card>

	</template>
	<script>
		Polymer({
			is: 'ripple-card',
			behaviors: [Behaviors.responsive_properties],
			properties: {
        heading: {
          type: String,
          value: ''
        },
        image: {
          type: String,
          value: ''
        },
        placeholderImage: {
        	type: String,
        	value: null
        },
        preloadImage: {
          type: Boolean,
          value: false
        },
        fadeImage: {
          type: Boolean,
          value: false
        },
        elevation: {
          type: Number,
          value: 1,
          reflectToAttribute: true
        },
        animatedShadow: {
          type: Boolean,
          value: false
        },
			},

			_get_elevation: function(narrow) {
				var elevation = +(!narrow); 
				return elevation;
			},

			_hide_fade: function(event, detail) {
				this._animating = true;
			},

			_show_fade: function (event, detail) {
				this._animating = false;
			}
		});
	</script>
</dom-module>